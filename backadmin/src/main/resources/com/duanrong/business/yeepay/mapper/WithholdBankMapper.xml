<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.duanrong.business.yeepay.mapper.WithholdBankMapper">
	<resultMap type="WithholdBank" id="WithholdBankRM">
		<id property="id" column="id" />
		<result property="userId" column="user_id" />
		<result property="bankCode" column="bank_code" />
		<result property="bankName" column="bank_name" />
		<result property="bankCount" column="bank_account" />
		<result property="status" column="status" />
		<result property="time" column="time" />
	</resultMap>
	
	 <select id="findList" resultMap="WithholdBankRM" parameterType="WithholdBank">
		SELECT *
		FROM loaner_withhold_bank
		<where>
		    <if test="userId != null and userId != ''">
				AND user_id=#{userId}
			</if>
			 <if test="status != null">
				AND status=1
			</if>
			<if test="bankCount != null and bankCount != ''">
				AND bank_account=#{bankCount}
			</if>
			<if test="id != null and id != ''">
				AND id=#{id}
			</if>
		</where>
		ORDER BY time DESC
	</select>
   <update id="deleteByUserId" parameterType="string">
		UPDATE  loaner_withhold_bank SET status=0
		WHERE user_id
		= #{userId}
	</update>
	 <update id="delete" parameterType="string">
		update  loaner_withhold_bank set status=0
		WHERE id
		= #{id}
	</update>
	<insert id="insert" parameterType="WithholdBank">
		INSERT INTO loaner_withhold_bank
		(id,
		user_id,
		bank_code, bank_name, bank_account, time,status)
		VALUES
		(#{id}, #{userId},
		#{bankCode}, #{bankName}, #{bankCount}, #{time},#{status})
	</insert>
</mapper>